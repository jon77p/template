// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.236.0/containers/ubuntu
{
  "name": "Template",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu",

  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  // "forwardPorts": [],

  "features": {
    // Common Utilities
    "ghcr.io/devcontainers/features/common-utils:2": {
      // Set ZSH as the default shell
      "configureZshAsDefaultShell": true
    },
    // Python
    "ghcr.io/devcontainers/features/python:1": {},
    // GitHub CLI
    "ghcr.io/devcontainers/features/github-cli:1": {},
    // NodeJS
    // "ghcr.io/devcontainers/features/node:1": {},
    // Rust
    "ghcr.io/devcontainers/features/rust:1": {},
    // Taskfile
    "ghcr.io/eitsupi/devcontainer-features/go-task:1": {},
    // Direnv
    "ghcr.io/devcontainers-contrib/features/direnv-asdf:2": {}
  },

  "postStartCommand": {
    "dev": "direnv allow . && task setup"
  },

  // VSCode Editor Settings
  "settings": {
    "sync.autoDownload": true,
    "sync.autoUpload": true,
    "telemetry.enableTelemetry": false,
    "redhat.telemetry.enabled": false,
    "debug.javascript.autoAttachFilter": "smart",
    "git.autofetch": true,
    "git.autoStash": true,
    "git.branchProtection": ["main"],
    "files.associations": {
      "*.yml": "yaml"
    },
    "yaml.schemas": {
      "https://json.schemastore.org/taskfile.json": ".github/tasks/**/*.yml"
    },
    "git.confirmSync": true,
    "editor.inlineSuggest.enabled": true,
    "github.copilot.inlineSuggest.enable": true,
    "github.copilot.enable": {
      "*": true,
      "yaml": true,
      "plaintext": false,
      "markdown": false
    }
  }
}
